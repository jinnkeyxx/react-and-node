{"ast":null,"code":"var _jsxFileName = \"D:\\\\l\\u1EADp tr\\xECnh\\\\nodejs\\\\react-and-node\\\\client\\\\src\\\\appchat@\\\\Components\\\\Login.jsx\";\nimport React, { useState } from \"react\";\nimport { Container, Row, Col, Card } from 'react-bootstrap';\nimport * as api from '../Service/apiHelper';\nimport * as helper from '../Helper/Common';\nimport Alert from '../Components/Alert';\nimport Loading from '../Components/Loading';\n\nconst Login = () => {\n  const [userValue, setUserValue] = useState('');\n  const [passValue, setPassValue] = useState('');\n  const [emailValue, setEmailValue] = useState('');\n  const [error, setErrorForm] = useState(\"\");\n  const [isLoading, setLoading] = useState(false);\n  const [statusForm, setStatusForm] = useState(\"error\");\n  const [showAlert, setShowAlert] = useState(false);\n\n  const changeInput = event => {\n    const nameInput = event.target.name;\n    const value = event.target.value;\n    if (nameInput === \"username\") return setUserValue(value);\n    if (nameInput === \"passwork\") return setPassValue(value);\n    if (nameInput === \"email\") return setEmailValue(value);\n  };\n\n  const ConfirmAlert = () => {\n    setShowAlert(false);\n\n    if (statusForm === 'success') {\n      window.location.reload();\n    }\n  };\n\n  const submitForm = async event => {\n    event.preventDefault();\n    await setLoading(true);\n    const data = await api.sendPostData('auth/login', {\n      username: userValue,\n      password: passValue,\n      email: emailValue\n    });\n\n    if (!helper.isEmptyObj(data)) {\n      if (data.status === true) {\n        setLoading(false);\n        setStatusForm(\"success\");\n        setErrorForm(data.messages);\n        setShowAlert(true);\n        api.saveToken(data.token);\n      } else {\n        setShowAlert(true);\n        setLoading(false);\n        setErrorForm(data.messages);\n      }\n\n      console.log(data);\n    } else {\n      await setLoading(false);\n      await setErrorForm(data.messages);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"container pt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, error !== \"\" && /*#__PURE__*/React.createElement(Alert, {\n    show: showAlert,\n    text: error,\n    type: statusForm,\n    Confirm: ConfirmAlert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    className: \"row pt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    sm: 10,\n    className: \" mr-auto ml-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card.Text, {\n    className: \"card-title text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  }, \"\\u0110\\u0103ng nh\\u1EADp\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    onChange: changeInput,\n    className: \"form-control\",\n    name: \"email\",\n    value: userValue,\n    placeholder: \"Nh\\u1EADp Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, \"Username or Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: changeInput,\n    className: \"form-control\",\n    name: \"username\",\n    value: passValue,\n    placeholder: \"Nh\\u1EADp t\\xE0i kho\\u1EA3n\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onChange: changeInput,\n    className: \"form-control\",\n    name: \"passwork\",\n    value: emailValue,\n    placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: submitForm,\n    className: \"btn btn-primary btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, \"\\u0110\\u0103ng nh\\u1EADp\"))), isLoading && /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 32\n    }\n  })))));\n};\n\nexport default React.memo(Login);","map":{"version":3,"sources":["D:/lập trình/nodejs/react-and-node/client/src/appchat@/Components/Login.jsx"],"names":["React","useState","Container","Row","Col","Card","api","helper","Alert","Loading","Login","userValue","setUserValue","passValue","setPassValue","emailValue","setEmailValue","error","setErrorForm","isLoading","setLoading","statusForm","setStatusForm","showAlert","setShowAlert","changeInput","event","nameInput","target","name","value","ConfirmAlert","window","location","reload","submitForm","preventDefault","data","sendPostData","username","password","email","isEmptyObj","status","messages","saveToken","token","console","log","memo"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAA+B,OAA/B;AACA,SAAQC,SAAR,EAAoBC,GAApB,EAA0BC,GAA1B,EAAgCC,IAAhC,QAA2C,iBAA3C;AACA,OAAO,KAAKC,GAAZ,MAAqB,sBAArB;AACA,OAAO,KAAKC,MAAZ,MAAwB,kBAAxB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,OAAP,MAAoB,uBAApB;;AACA,MAAMC,KAAK,GAAG,MAAM;AAChB,QAAM,CAACC,SAAD,EAAaC,YAAb,IAA6BX,QAAQ,CAAC,EAAD,CAA3C;AACA,QAAM,CAACY,SAAD,EAAaC,YAAb,IAA8Bb,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACc,UAAD,EAAcC,aAAd,IAA+Bf,QAAQ,CAAC,EAAD,CAA7C;AACA,QAAM,CAACgB,KAAD,EAASC,YAAT,IAAyBjB,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACkB,SAAD,EAAaC,UAAb,IAA2BnB,QAAQ,CAAC,KAAD,CAAzC;AACA,QAAM,CAACoB,UAAD,EAAcC,aAAd,IAA+BrB,QAAQ,CAAC,OAAD,CAA7C;AACA,QAAM,CAACsB,SAAD,EAAaC,YAAb,IAA6BvB,QAAQ,CAAC,KAAD,CAA3C;;AAEA,QAAMwB,WAAW,GAAIC,KAAD,IAAW;AAC3B,UAAMC,SAAS,GAAGD,KAAK,CAACE,MAAN,CAAaC,IAA/B;AACA,UAAMC,KAAK,GAAGJ,KAAK,CAACE,MAAN,CAAaE,KAA3B;AACA,QAAGH,SAAS,KAAK,UAAjB,EAA6B,OAAOf,YAAY,CAACkB,KAAD,CAAnB;AAC7B,QAAGH,SAAS,KAAK,UAAjB,EAA6B,OAAOb,YAAY,CAACgB,KAAD,CAAnB;AAC7B,QAAGH,SAAS,KAAK,OAAjB,EAA0B,OAAOX,aAAa,CAACc,KAAD,CAApB;AAC7B,GAND;;AAOA,QAAMC,YAAY,GAAG,MAAM;AACzBP,IAAAA,YAAY,CAAC,KAAD,CAAZ;;AACA,QAAGH,UAAU,KAAK,SAAlB,EAA4B;AACxBW,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH;AACF,GALD;;AAMA,QAAMC,UAAU,GAAG,MAAOT,KAAP,IAAiB;AAChCA,IAAAA,KAAK,CAACU,cAAN;AACA,UAAMhB,UAAU,CAAC,IAAD,CAAhB;AACA,UAAMiB,IAAI,GAAG,MAAM/B,GAAG,CAACgC,YAAJ,CAAiB,YAAjB,EAA+B;AAACC,MAAAA,QAAQ,EAAG5B,SAAZ;AAAwB6B,MAAAA,QAAQ,EAAE3B,SAAlC;AAA8C4B,MAAAA,KAAK,EAAG1B;AAAtD,KAA/B,CAAnB;;AACA,QAAG,CAACR,MAAM,CAACmC,UAAP,CAAkBL,IAAlB,CAAJ,EAA4B;AACxB,UAAGA,IAAI,CAACM,MAAL,KAAgB,IAAnB,EAAwB;AACpBvB,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,QAAAA,aAAa,CAAC,SAAD,CAAb;AACAJ,QAAAA,YAAY,CAACmB,IAAI,CAACO,QAAN,CAAZ;AACApB,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACAlB,QAAAA,GAAG,CAACuC,SAAJ,CAAcR,IAAI,CAACS,KAAnB;AACH,OAND,MAOK;AACDtB,QAAAA,YAAY,CAAC,IAAD,CAAZ;AACAJ,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,QAAAA,YAAY,CAACmB,IAAI,CAACO,QAAN,CAAZ;AACH;;AACDG,MAAAA,OAAO,CAACC,GAAR,CAAYX,IAAZ;AACH,KAdD,MAeK;AACD,YAAMjB,UAAU,CAAC,KAAD,CAAhB;AACA,YAAMF,YAAY,CAACmB,IAAI,CAACO,QAAN,CAAlB;AACH;AACJ,GAvBD;;AAwBA,sBACI,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,gBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC3B,KAAK,KAAK,EAAV,iBAAiB,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAEM,SAAb;AAAwB,IAAA,IAAI,EAAEN,KAA9B;AAAqC,IAAA,IAAI,EAAEI,UAA3C;AAAuD,IAAA,OAAO,EAAEU,YAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADlB,eAEE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAY,IAAA,EAAE,EAAE,EAAhB;AAAqB,IAAA,SAAS,EAAC,kBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAC,wBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,QAAQ,EAAEN,WAA9B;AAA2C,IAAA,SAAS,EAAC,cAArD;AAAoE,IAAA,IAAI,EAAC,OAAzE;AAAiF,IAAA,KAAK,EAAEd,SAAxF;AAAmG,IAAA,WAAW,EAAC,iBAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAHF,eAOE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAoB,IAAA,QAAQ,EAAEc,WAA9B;AAA6C,IAAA,SAAS,EAAC,cAAvD;AAAsE,IAAA,IAAI,EAAC,UAA3E;AAAsF,IAAA,KAAK,EAAEZ,SAA7F;AAAwG,IAAA,WAAW,EAAC,6BAApH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAPF,eAWE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAwB,IAAA,QAAQ,EAAEY,WAAlC;AAAiD,IAAA,SAAS,EAAC,cAA3D;AAA0E,IAAA,IAAI,EAAC,UAA/E;AAA0F,IAAA,KAAK,EAAEV,UAAjG;AAA6G,IAAA,WAAW,EAAC,8BAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAXF,eAeE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAEoB,UAA/B;AAA2C,IAAA,SAAS,EAAC,2BAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,CAfF,CADF,EAsBGhB,SAAS,iBAAK,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBjB,CADF,CADF,CAFF,CADJ;AAkCH,CAhFD;;AAiFA,eAAenB,KAAK,CAACiD,IAAN,CAAWvC,KAAX,CAAf","sourcesContent":["import React , {useState} from \"react\"\r\nimport {Container , Row , Col , Card} from 'react-bootstrap'\r\nimport * as api from '../Service/apiHelper'\r\nimport * as helper from '../Helper/Common'\r\nimport Alert from '../Components/Alert'\r\nimport Loading from '../Components/Loading'\r\nconst Login = () => {\r\n    const [userValue , setUserValue] = useState('')\r\n    const [passValue , setPassValue ] = useState('')\r\n    const [emailValue , setEmailValue] = useState('')\r\n    const [error , setErrorForm] = useState(\"\")\r\n    const [isLoading , setLoading] = useState(false)\r\n    const [statusForm , setStatusForm] = useState(\"error\")\r\n    const [showAlert , setShowAlert] = useState(false)\r\n    \r\n    const changeInput = (event) => {\r\n        const nameInput = event.target.name\r\n        const value = event.target.value\r\n        if(nameInput === \"username\") return setUserValue(value)\r\n        if(nameInput === \"passwork\") return setPassValue(value)\r\n        if(nameInput === \"email\") return setEmailValue(value)\r\n    }\r\n    const ConfirmAlert = () => {\r\n      setShowAlert(false)\r\n      if(statusForm === 'success'){\r\n          window.location.reload()\r\n      }\r\n    }\r\n    const submitForm = async (event) => {\r\n        event.preventDefault()\r\n        await setLoading(true)\r\n        const data = await api.sendPostData('auth/login' ,{username : userValue , password: passValue , email : emailValue})\r\n        if(!helper.isEmptyObj(data)){\r\n            if(data.status === true){\r\n                setLoading(false)\r\n                setStatusForm(\"success\")\r\n                setErrorForm(data.messages)\r\n                setShowAlert(true)\r\n                api.saveToken(data.token)\r\n            }\r\n            else {\r\n                setShowAlert(true)\r\n                setLoading(false)\r\n                setErrorForm(data.messages)\r\n            }\r\n            console.log(data);\r\n        }\r\n        else {\r\n            await setLoading(false)\r\n            await setErrorForm(data.messages)\r\n        }\r\n    }\r\n    return(\r\n        <Container className=\"container pt-5\">\r\n        {error !== \"\" && (<Alert show={showAlert} text={error} type={statusForm} Confirm={ConfirmAlert}/>)}\r\n          <Row className=\"row pt-5\">\r\n            <Col md={8} sm={10}  className=\" mr-auto ml-auto\">\r\n              <Card >\r\n                <Card.Body className=\"card-body\">\r\n                  <Card.Text className=\"card-title text-center\">Đăng nhập</Card.Text>\r\n                  <hr />\r\n                  <div className=\"form-group\">\r\n                    <label >Email:</label>\r\n                    <input type=\"email\" onChange={changeInput} className=\"form-control\" name=\"email\" value={userValue} placeholder=\"Nhập Email\" />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label >Username or Email:</label>\r\n                    <input type=\"text\"  onChange={changeInput}   className=\"form-control\" name=\"username\" value={passValue} placeholder=\"Nhập tài khoản\" />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label >Password:</label>\r\n                    <input type=\"password\"  onChange={changeInput}   className=\"form-control\" name=\"passwork\" value={emailValue} placeholder=\"Nhập mật khẩu\" />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <button type=\"button\" onClick={submitForm} className=\"btn btn-primary btn-block\" >\r\n                      Đăng nhập\r\n                    </button>\r\n                  </div>\r\n                </Card.Body>\r\n                {isLoading && (<Loading/>)}\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      \r\n    )\r\n}\r\nexport default React.memo(Login)"]},"metadata":{},"sourceType":"module"}